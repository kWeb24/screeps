module.exports=function(t){var e={};function s(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=t,s.c=e,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log(">> Loading Role...");e.default=class{constructor(){this.ROLE="universal",this.POPULATION=2,this.GENOME=[WORK,CARRY,MOVE],this.CAPABLE_OF=[],this.ON_DEMAND=!0,this.USE_ENERGY_DEPOSITS=!0}run(t){}needsHelp(t){return!1}shouldSpawn(){return this.countCreeps()<this.POPULATION}getCreeps(){return _.filter(Game.creeps,t=>t.memory.role==this.ROLE)}countCreeps(){return this.getCreeps().length}dropRoad(t){if(CACHE.ROOMS[t.room.name].getMyConstructionSites().length<10){const e=t.room.lookAt(t.pos);"structure"!=e.type&&"constructionSite"!=e.type&&t.room.createConstructionSite(t.pos,STRUCTURE_ROAD)}}getPrimarySource(t){const e=CACHE.ROOMS[t.name].getSources();let s,r,i=[];for(const t in e){const s=_.filter(Game.creeps,s=>s.memory.primarySource==e[t].id);i.push(s.length)}return i.forEach((t,e)=>{(void 0===s||t<s)&&(s=t,r=e)}),e[r].id}selectSource(t){let e=t.getSources();const s=_.filter(e,e=>e.id==t.memory.primarySource);let r=s[0];return(s.energy<t.carryCapacity||s.ticksToRegeneration>10)&&(r=t.getClosestActiveSource()),r}selectEnergyDeposit(t){const e=CACHE.ROOMS[t.room.name].getContainers(),s=CACHE.ROOMS[t.room.name].getMyStorage()[0];let r=!1;if(void 0!==s&&s.isActive()&&(r=s.id,s.store[RESOURCE_ENERGY]>=t.carryCapacity))return s;if(void 0!==e){const s=_.filter(e,t=>t.isActive());if(s.length){r=s[0].id;const e=_.filter(s,e=>e.store[RESOURCE_ENERGY]>=t.carryCapacity);if(e.length)return e[0]}}return r}harvest(t){t.status("harvesting");let e=this.selectEnergyDeposit(t);if(!1!==e&&"string"!=typeof e&&void 0!==e&&this.USE_ENERGY_DEPOSITS)t.withdraw(e,RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&(t.moveTo(e),t.status("moving")),t.target(e.id);else if("string"==typeof e&&this.USE_ENERGY_DEPOSITS){const e=t.getSources();t.harvest(e[1])==ERR_NOT_IN_RANGE&&(t.moveTo(e[1]),t.status("moving")),t.target(e[1].id)}else e=this.selectSource(t),t.harvest(e)==ERR_NOT_IN_RANGE&&(t.moveTo(e),t.status("moving")),t.target(e.id)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.ENABLED=t.enabled,this.COLORS={white:"rgb(255, 255, 255)",grey:"rgba(255, 255, 255, 0.6)",light:"rgba(255, 255, 255, 0.2)",red:"rgb(255, 65, 65)",green:"rgb(105, 212, 29)",yellow:"rgb(217, 169, 0)",blue:"rgb(54, 211, 221)",violet:"rgb(212, 29, 127)",black:"rgb(0,0,0)"}}log(t,e=!1){this.buildLog(t,this.COLORS.white,e)}error(t,e=!1){this.buildLog(t,this.COLORS.red,e)}stateChange(t,e=!1){this.buildLog(t,this.COLORS.blue,e)}success(t,e=!1){this.buildLog(t,this.COLORS.green,e)}warning(t,e=!1){this.buildLog(t,this.COLORS.yellow,e)}note(t,e=!1){this.buildLog(t,this.COLORS.grey,e)}finish(t,e=!1){if(!this.ENABLED)return!1;let s=this.buildLadder(e);s+='<span style="padding: 0 5px; background: '+this.COLORS.green+"; color: "+this.COLORS.black+'">'+t+"</span>",console.log(s)}ignore(t,e=!1){if(!this.ENABLED)return!1;let s=this.buildLadder(e);s+='<span style="padding: 0 5px; background: '+this.COLORS.grey+"; color: "+this.COLORS.black+'">'+t+"</span>",console.log(s)}countLoop(t,e=!1){if(!this.ENABLED)return!1;let s=this.buildLadder(e);s+='<span style="padding: 0 5px; background: '+this.COLORS.white+"; color: "+this.COLORS.black+'">'+t+"</span>",console.log(s)}buildLog(t,e,s){if(!this.ENABLED)return!1;let r="";s?(r+=this.buildLadder(s),r+='<span style="color: '+e+'">'+t+"</span>"):r='<span style="color: '+e+'">'+t+"</span>",console.log(r)}buildLadder(t){if(t){let s='<span style="color: '+this.COLORS.light+'">';for(var e=0;e<t;e++)s+="|&nbsp;&nbsp;&nbsp;";return s+="</span>"}}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(0));console.log(">> Loading Repairer Role...");e.default=class extends r.default{constructor(){super(),this.ROLE="repairer",this.POPULATION=1,this.GENOME=[WORK,CARRY,MOVE],this.CAPABLE_OF=["upgrader"],this.ON_DEMAND=!1,this.USE_ENERGY_DEPOSITS=!0}run(t){("harvesting"!=t.status()&&0==t.carry.energy||"harvesting"==t.status()&&!t.isEnergyCapFull())&&this.harvest(t),("repairing"!=t.status()&&t.isEnergyCapFull()||"repairing"==t.status()&&t.carry.energy>0||"bored"==t.status()&&t.carry.energy>0||"moving"==t.status()&&t.carry.energy>0)&&this.repair(t),this.dropRoad(t)}repair(t){var e=this.findClosestRepairableStructure(t);if(t.status("repairing"),e)t.target(e.id),t.repair(e)==ERR_NOT_IN_RANGE?(t.moveTo(e),t.status("moving")):e.structureType==STRUCTURE_TOWER&&t.transfer(e,RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&(t.moveTo(e),t.status("moving"));else{const[e]=CACHE.ROOMS[t.room.name].getMySpawns(),s=CACHE.ROOMS[t.room.name].ROOM.getPositionAt(e.pos.x-4,e.pos.y+5);t.moveTo(s),t.status("bored"),t.target("none")}}needsHelp(t){return!!this.findClosestRepairableStructure(t)}findClosestRepairableStructure(t){const e=t.pos.findClosestByRange(FIND_STRUCTURES,{filter:t=>t.energy<t.energyCapacity&&t.structureType==STRUCTURE_TOWER});if(e)return e;let s=t.pos.findClosestByRange(FIND_STRUCTURES,{filter:t=>t.hits<t.hitsMax/1.3&&t.structureType!=STRUCTURE_WALL&&t.structureType!=STRUCTURE_ROAD});return s&&null!==s?s:s=t.pos.findClosestByRange(FIND_STRUCTURES,{filter:t=>t.hits<t.hitsMax/1.3})}}},function(t,e,s){t.exports=s(4)},function(t,e,s){"use strict";(function(e){s(6);var r=R(s(9)),i=R(s(11)),o=R(s(13)),n=R(s(15)),a=R(s(20)),u=R(s(21));function R(t){return t&&t.__esModule?t:{default:t}}e.CACHE=new i.default,e.CORE=new r.default,e.PLANNER=new o.default,e.ROLE_MANAGER=new n.default,e.SPAWN_MANAGER=new a.default,e.UTILS=new u.default,t.exports.loop=(()=>CORE.loop())}).call(this,s(5))},function(t,e,s){"use strict";var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,s){"use strict";s(7),console.log(">> Loading Prototypes...")},function(t,e,s){"use strict";s(8),console.log(">> Loading Creep prototype..."),Object.assign(Creep.prototype,{injectMemory(t="none",e="none",s="none",r="bored",i="none"){this.memory.role=t,this.memory.job=e,this.memory.target=s,this.memory.status=r,this.memory.primarySource=i}}),Object.assign(Creep.prototype,{remember(t,e){this.memory.key=e}}),Object.assign(Creep.prototype,{forget(t){delete this.memory.key}}),Object.assign(Creep.prototype,{role(){return this.memory.role}}),Object.assign(Creep.prototype,{job(t=!1){if(!t)return this.memory.job;this.memory.job=t}}),Object.assign(Creep.prototype,{target(t=!1){if(!t)return this.memory.target;this.memory.target=t}}),Object.assign(Creep.prototype,{status(t=!1){if(!t)return this.memory.status;this.memory.status=t}}),Object.assign(Creep.prototype,{primarySource(t=!1){if(!t)return this.memory.primarySource;this.memory.primarySource=t}}),Object.assign(Creep.prototype,{isEnergyCapFull(){return this.carry.energy>=this.carryCapacity}})},function(t,e,s){"use strict";console.log(">> Loading Harvester Creep prototype..."),Object.assign(Creep.prototype,{getSources(){return CACHE.ROOMS[this.room.name].getSources()}}),Object.assign(Creep.prototype,{getActiveSources(){return CACHE.ROOMS[this.room.name].getActiveSources()}}),Object.assign(Creep.prototype,{getClosestActiveSource(){return this.pos.findClosestByRange(FIND_ACTIVE_SOURCES)}}),Object.assign(Creep.prototype,{getEnergySinks(){return CACHE.ROOMS[this.room.name].getEnergySinks()}})},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(s(1)),i=o(s(10));function o(t){return t&&t.__esModule?t:{default:t}}console.log(">> Loading Core...");const n=new r.default({enabled:!1});e.default=class{constructor(){this.PARAM_ADAPTIVE_ROLES=!1,this.LOOP=1,console.log("-- -- CORE_LOGGER_ENABLED: "+n.ENABLED),console.log("-- -- PARAM_ADAPTIVE_ROLES:"+this.PARAM_ADAPTIVE_ROLES),this.Tower=new i.default}loop(){this.clearDeadCreeps(),this.spawnCreeps(),this.runStructures(),this.runCreeps(),this.LOOP++}clearDeadCreeps(){for(var t in Memory.creeps)Game.creeps[t]||delete Memory.creeps[t]}spawnCreeps(){SPAWN_MANAGER.spawn()}runCreeps(){for(var t in Game.creeps){var e=Game.creeps[t];ROLE_MANAGER.ROLES.forEach(t=>{e.memory.role==t.ROLE&&(this.PARAM_ADAPTIVE_ROLES?ROLE_MANAGER.selectRole(e):t.run(e))})}}runStructures(){const[t]=CACHE.ROOMS.E4N27.getMyTowers();this.Tower.run(t)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log(">> Loading Tower Structure...");e.default=class{constructor(){}run(t){var e=t.pos.findClosestByRange(FIND_HOSTILE_CREEPS);e?t.attack(e):t.energyCapacity<4e3?t.repair(this.findClosestDamagedStructureNotRoad(t)):t.repair(this.findClosestDamagedStructure(t))}findClosestDamagedStructure(t){return t.pos.findClosestByRange(FIND_STRUCTURES,{filter:t=>t.hits<t.hitsMax})}findClosestDamagedStructureNotRoad(t){return t.pos.findClosestByRange(FIND_STRUCTURES,{filter:t=>t.hits<t.hitsMax&&t.structureType!=STRUCTURE_ROAD})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(12));console.log(">> Loading Cache module...");e.default=class{constructor(){this.ROOMS=[],this.initRoomCache()}initRoomCache(){for(const t in Game.rooms)void 0===this.ROOMS[t]&&(this.ROOMS[t]=new r.default(Game.rooms[t]))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log(">> Loading Room Cache module...");e.default=class{constructor(t){this.ROOM=t,this.SOURCES=void 0,this.SOURCES_ACTIVE=void 0,this.CREEPS=void 0,this.MY_CREEPS=void 0,this.HOSTILE_CREEPS=void 0,this.DROPPED_ENERGY=void 0,this.DROPPED_RESOURCES=void 0,this.FLAGS=void 0,this.CONSTRUCTION_SITES=void 0,this.MY_SPAWNS=void 0,this.HOSTILE_SPAWNS=void 0,this.MY_CONSTRUCTION_SITES=void 0,this.HOSTILE_CONSTRUCTION_SITES=void 0,this.MINERALS=void 0,this.NUKES=void 0,this.TOMBSTONES=void 0,this.STRUCTURES=void 0,this.MY_STRUCTURES=void 0,this.HOSTILE_STRUCTURES=void 0,this.ENERGY_SINKS=void 0,this.CONTAINERS=void 0,this.MY_STORAGE=void 0,this.MY_TOWERS=void 0,this.KEEPERLIARS=void 0,this.PORTALS=void 0,this.POWERBANKS=void 0,this.MY_EXTENSIONS=void 0,this.MY_CONTROLLER=void 0,this.MY_EXTRACTOR=void 0,this.MY_LINKS=void 0,this.MY_NUKERS=void 0,this.MY_OBSERVERS=void 0,this.MY_POWERSPAWNS=void 0,this.MY_RAMPARTS=void 0,this.MY_TERMINALS=void 0,this.MY_WALLS=void 0}getSources(){return void 0===this.SOURCES&&(this.SOURCES=this.ROOM.find(FIND_SOURCES)),this.SOURCES}getActiveSources(){return void 0===this.SOURCES_ACTIVE&&(this.SOURCES_ACTIVE=this.ROOM.find(FIND_SOURCES_ACTIVE)),this.SOURCES_ACTIVE}getCreeps(){return void 0===this.CREEPS&&(this.CREEPS=this.ROOM.find(FIND_CREEPS)),this.CREEPS}getMyCreeps(){return void 0===this.MY_CREEPS&&(this.MY_CREEPS=this.ROOM.find(FIND_MY_CREEPS)),this.MY_CREEPS}getHostileCreeps(){return void 0===this.HOSTILE_CREEPS&&(this.HOSTILE_CREEPS=this.ROOM.find(FIND_HOSTILE_CREEPS)),this.HOSTILE_CREEPS}getDroppedEnergy(){return void 0===this.DROPPED_ENERGY&&(this.DROPPED_ENERGY=this.ROOM.find(FIND_DROPPED_ENERGY)),this.DROPPED_ENERGY}getDroppedResources(){return void 0===this.DROPPED_RESOURCES&&(this.DROPPED_RESOURCES=this.ROOM.find(FIND_DROPPED_RESOURCES)),this.DROPPED_RESOURCES}getFlags(){return void 0===this.FLAGS&&(this.FLAGS=this.ROOM.find(FIND_FLAGS)),this.FLAGS}getConstructionSites(){return void 0===this.CONSTRUCTION_SITES&&(this.CONSTRUCTION_SITES=this.ROOM.find(FIND_CONSTRUCTION_SITES)),this.CONSTRUCTION_SITES}getMyConstructionSites(){return void 0===this.MY_CONSTRUCTION_SITES&&(this.MY_CONSTRUCTION_SITES=this.ROOM.find(FIND_MY_CONSTRUCTION_SITES)),this.MY_CONSTRUCTION_SITES}getHostileConstructionSites(){return void 0===this.HOSTILE_CONSTRUCTION_SITES&&(this.HOSTILE_CONSTRUCTION_SITES=this.ROOM.find(FIND_HOSTILE_CONSTRUCTION_SITES)),this.HOSTILE_CONSTRUCTION_SITES}getMySpawns(){return void 0===this.MY_SPAWNS&&(this.MY_SPAWNS=this.ROOM.find(FIND_MY_SPAWNS)),this.MY_SPAWNS}getHostileSpawns(){return void 0===this.HOSTILE_SPAWNS&&(this.HOSTILE_SPAWNS=this.ROOM.find(FIND_HOSTILE_SPAWNS)),this.HOSTILE_SPAWNS}getMinerals(){return void 0===this.MINERALS&&(this.MINERALS=this.ROOM.find(FIND_MINERALS)),this.MINERALS}getNukes(){return void 0===this.NUKES&&(this.NUKES=this.ROOM.find(FIND_NUKES)),this.NUKES}getTombstones(){return void 0===this.TOMBSTONES&&(this.TOMBSTONES=this.ROOM.find(FIND_TOMBSTONES)),this.TOMBSTONES}getStructures(){return void 0===this.STRUCTURES&&(this.STRUCTURES=this.ROOM.find(FIND_STRUCTURES)),this.STRUCTURES}getMyStructures(){return void 0===this.MY_STRUCTURES&&(this.MY_STRUCTURES=this.ROOM.find(FIND_MY_STRUCTURES)),this.MY_STRUCTURES}getHostileStructures(){return void 0===this.HOSTILE_STRUCTURES&&(this.HOSTILE_STRUCTURES=this.ROOM.find(FIND_HOSTILE_STRUCTURES)),this.HOSTILE_STRUCTURES}getEnergySinks(){return void 0===this.ENERGY_SINKS&&(this.ENERGY_SINKS=this.ROOM.find(FIND_STRUCTURES,{filter:t=>t.structureType==STRUCTURE_SPAWN||t.structureType==STRUCTURE_EXTENSION||t.structureType==STRUCTURE_STORAGE||t.structureType==STRUCTURE_CONTAINER||t.structureType==STRUCTURE_TOWER})),this.ENERGY_SINKS}getContainers(){if(void 0===this.CONTAINERS){const t=this.getStructures();this.CONTAINERS=_.filter(t,t=>t.structureType==STRUCTURE_CONTAINER)}return this.CONTAINERS}getMyStorage(){if(void 0===this.MY_STORAGE){const t=this.getStructures();this.MY_STORAGE=_.filter(t,t=>t.structureType==STRUCTURE_STORAGE)}return this.MY_STORAGE}getMyTowers(){if(void 0===this.MY_TOWERS){const t=this.getStructures();this.MY_TOWERS=_.filter(t,t=>t.structureType==STRUCTURE_TOWER)}return this.MY_TOWERS}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(14));console.log(">> Loading Planner module...");e.default=class{constructor(){this.ROOMS=[],this.initRoomPlanning()}initRoomPlanning(){for(const t in Game.rooms)void 0===this.ROOMS[t]&&Game.rooms[t].controller.my&&(this.ROOMS[t]=new r.default(Game.rooms[t]))}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log(">> Loading RoomPlanner module...");e.default=class{constructor(t){this.ROOM=t,[this.SPAWN]=CACHE.ROOMS[this.ROOM.name].getMySpawns(),this.PATHS=[],this.RLC2_EXTENSIONS=[{x:0,y:-2},{x:-1,y:-2},{x:-2,y:-1},{x:-2,y:0},{x:2,y:1}],this.RLC3_EXTENSIONS=[{x:2,y:0},{x:1,y:2},{x:0,y:2},{x:-2,y:1},{x:-1,y:2}],this.RLC4_EXTENSIONS=[{x:1,y:-2},{x:2,y:-1},{x:2,y:3},{x:1,y:3},{x:0,y:3}],this.RLC5_EXTENSIONS=[{x:3,y:2},{x:3,y:1},{x:3,y:0},{x:-3,y:0},{x:-3,y:-1}],this.RLC6_EXTENSIONS=[{x:-3,y:-2},{x:-2,y:-3},{x:-1,y:-3},{x:0,y:-3}],this.RLC3_CONTAINERS=[{x:1,y:-1},{x:1,y:0},{x:0,y:-1},{x:-1,y:1},{x:-1,y:0}],this.selectExtensions(),this.selectContainers(),this.planRoads(),this.buildRoads()}planRoads(){this.findPath(this.ROOM.controller.pos,CACHE.ROOMS[this.ROOM.name].getSources()),this.findPath(this.ROOM.controller.pos,CACHE.ROOMS[this.ROOM.name].getMinerals()),this.findPath(this.ROOM.controller.pos,CACHE.ROOMS[this.ROOM.name].getMySpawns())}findPath(t,e){for(const s in e){const r=PathFinder.search(t,{pos:e[s].pos,range:1},{plainCost:1,swampCost:1});this.PATHS.push(r.path)}}buildRoads(){this.PATHS.forEach(t=>{t.forEach(t=>{this.ROOM.lookAt(t).forEach(e=>{"structure"!=e.type&&"constructionSite"!=e.type&&this.ROOM.createConstructionSite(t,STRUCTURE_ROAD)})})})}drawVisuals(){this.PATHS.forEach(t=>{this.ROOM.visual.poly(t,{opacity:1,stroke:"#dfff1b",lineStyle:"dotted"})})}selectExtensions(){if("kWeb24"==this.ROOM.controller.owner.username)switch(this.ROOM.controller.level){case 2:this.buildExtensions(this.RLC2_EXTENSIONS,"#6bf7ff");break;case 3:this.buildExtensions(this.RLC3_EXTENSIONS,"#f95eff");break;case 4:this.buildExtensions(this.RLC4_EXTENSIONS,"#a4ff4");break;case 5:this.buildExtensions(this.RLC5_EXTENSIONS,"#ffd749");break;case 6:this.buildExtensions(this.RLC6_EXTENSIONS,"#ff4949")}}buildExtensions(t,e){t.forEach(t=>{const e=this.ROOM.getPositionAt(this.SPAWN.pos.x+t.x,this.SPAWN.pos.y+t.y);null!==e&&this.ROOM.lookAt(e).forEach(t=>{"structure"!=t.type&&"constructionSite"!=t.type&&this.ROOM.createConstructionSite(e,STRUCTURE_EXTENSION)})})}selectContainers(){if("kWeb24"==this.ROOM.controller.owner.username)switch(this.ROOM.controller.level){case 3:this.buildContainers(this.RLC3_CONTAINERS,"#f95eff")}}buildContainers(t,e){t.forEach(t=>{const e=this.ROOM.getPositionAt(this.SPAWN.pos.x+t.x,this.SPAWN.pos.y+t.y);null!==e&&this.ROOM.lookAt(e).forEach(t=>{"structure"!=t.type&&"constructionSite"!=t.type&&this.ROOM.createConstructionSite(e,STRUCTURE_CONTAINER)})})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=R(s(1)),i=R(s(16)),o=R(s(17)),n=R(s(18)),a=R(s(2)),u=R(s(19));function R(t){return t&&t.__esModule?t:{default:t}}console.log(">> Loading RoleManager...");const E=new r.default({enabled:!1});e.default=class{constructor(){this.Harvester=new i.default,this.Builder=new n.default,this.Upgrader=new o.default,this.Repairer=new a.default,this.RoadKeeper=new u.default,this.ROLES=[this.RoadKeeper,this.Repairer,this.Builder,this.Upgrader,this.Harvester]}selectRole(t){const e=this.getCreepRoleReference(t);if(e[0].needsHelp(t)||"upgrader"==e[0].role)e[0].run(t);else{const s=this.findRoleInNeed(t,e);s?(s.run(t),E.note(t.name+" ("+t.memory.role+") role was changed to: "+s.role,4)):e[0].run(t)}}findRoleInNeed(t,e){let s=!1;return e[0].capableOf.forEach(e=>{const r=this.ROLES.filter(s=>s.role===e&&s.needsHelp(t));s||void 0===r[0]||(s=r[0])}),s}getCreepRoleReference(t){return this.ROLES.filter(e=>e.role===t.memory.role)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(0));console.log(">> Loading Harvester Role...");e.default=class extends r.default{constructor(){super(),this.ROLE="harvester",this.POPULATION=4,this.GENOME=[WORK,CARRY,MOVE],this.CAPABLE_OF=["upgrader","builder"],this.ON_DEMAND=!1,this.USE_ENERGY_DEPOSITS=!1}run(t){("harvesting"!=t.status()&&0==t.carry.energy||"harvesting"==t.status()&&!t.isEnergyCapFull())&&this.harvest(t),("transfering"!=t.status()&&t.isEnergyCapFull()||"transfering"==t.status()&&t.carry.energy>0||"moving"==t.status()&&t.carry.energy>0)&&this.transfer(t),this.dropRoad(t)}transfer(t){const e=t.getEnergySinks(),s=_.filter(e,t=>(t.structureType==STRUCTURE_EXTENSION||t.structureType==STRUCTURE_SPAWN)&&t.energy<t.energyCapacity),r=_.filter(e,t=>(t.structureType==STRUCTURE_CONTAINER||t.structureType==STRUCTURE_STORAGE)&&_.sum(t.store)<t.storeCapacity);let i=[];s.length?i=s:r.length&&(i=r),t.status("transfering"),i.length>0&&(t.target(i[0].id),t.transfer(i[0],RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&(t.moveTo(i[0]),t.status("moving")))}needsHelp(t){return!t.isEnergyCapFull()&&t.getSources().length}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(0));console.log(">> Loading Upgrader Role...");e.default=class extends r.default{constructor(){super(),this.ROLE="upgrader",this.POPULATION=2,this.GENOME=[WORK,CARRY,MOVE],this.CAPABLE_OF=["harvester","builder"],this.ON_DEMAND=!1,this.USE_ENERGY_DEPOSITS=!0}run(t){("harvesting"!=t.status()&&0==t.carry.energy||"harvesting"==t.status()&&!t.isEnergyCapFull())&&this.harvest(t),("upgrading"!=t.status()&&t.isEnergyCapFull()||"upgrading"==t.status()&&t.carry.energy>0||"moving"==t.status()&&t.carry.energy>0)&&this.upgrade(t),this.dropRoad(t)}upgrade(t){t.status("upgrading"),t.target(t.room.controller.name),t.upgradeController(t.room.controller)==ERR_NOT_IN_RANGE&&(t.moveTo(t.room.controller),t.status("moving"))}needsHelp(t){return t.carry.energy==t.carryCapacity}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(0));console.log(">> Loading Builder Role...");e.default=class extends r.default{constructor(){super(),this.ROLE="builder",this.POPULATION=2,this.GENOME=[WORK,CARRY,MOVE],this.CAPABLE_OF=["upgrader"],this.ON_DEMAND=!0,this.USE_ENERGY_DEPOSITS=!0}run(t){("harvesting"!=t.status()&&0==t.carry.energy||"harvesting"==t.status()&&!t.isEnergyCapFull())&&this.harvest(t),("building"!=t.status()&&t.isEnergyCapFull()||"building"==t.status()&&t.carry.energy>0||"bored"==t.status()&&t.carry.energy>0||"moving"==t.status()&&t.carry.energy>0)&&this.build(t)}build(t){let e=t.pos.findClosestByRange(FIND_CONSTRUCTION_SITES,{filter:t=>t.structureType==STRUCTURE_EXTENSION||t.structureType==STRUCTURE_TOWER||t.structureType==STRUCTURE_CONTAINER});if(e||(e=t.pos.findClosestByRange(FIND_CONSTRUCTION_SITES)),t.status("building"),e)t.build(e)==ERR_NOT_IN_RANGE&&(t.moveTo(e),t.status("moving"),t.target(e.id));else{const[e]=CACHE.ROOMS[t.room.name].getMySpawns(),s=CACHE.ROOMS[t.room.name].ROOM.getPositionAt(e.pos.x-4,e.pos.y-5);t.moveTo(s),t.status("bored"),t.target("BuildersGatherPoint")}}needsHelp(t){return t.room.find(FIND_CONSTRUCTION_SITES).length}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(s(2));console.log(">> Loading Road Keeper...");e.default=class extends r.default{constructor(){super(),this.ROLE="roadKeeper",this.POPULATION=1,this.GENOME=[WORK,CARRY,MOVE,MOVE],this.CAPABLE_OF=["upgrader"],this.ON_DEMAND=!1,this.USE_ENERGY_DEPOSITS=!0}findClosestRepairableStructure(t){return t.pos.findClosestByRange(FIND_STRUCTURES,{filter:t=>t.hits<t.hitsMax/1.3&&t.structureType==STRUCTURE_ROAD})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log(">> Loading SpawnManager...");e.default=class{constructor(){this.MAX_BODY_PARTS=50}spawn(){ROLE_MANAGER.ROLES.forEach(t=>{if(_.filter(Game.creeps,e=>e.memory.role==t.ROLE),t.shouldSpawn()){const e=t.ROLE+"_"+UTILS.guidGenerator(),s=Game.spawns.CipciaObfita.room,r=this.createAffordableGenome(t,s);if(!r)return!1;Game.spawns.CipciaObfita.createCreep(r,e,{role:t.ROLE,primarySource:t.getPrimarySource(s)})}})}createAffordableGenome(t,e){const s=e.energyAvailable;e.energyCapacityAvailable;let r=0,i=[],o=!0;for(;r<s&&o;)t.GENOME.forEach(t=>{let e=0;"carry"==t&&(e=BODYPART_COST[MOVE]),r+BODYPART_COST[t]+e<s?(i.push(t),r+=BODYPART_COST[t]):o=!1});return!(i.length<t.GENOME.length)&&i}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),console.log(">> Loading Utilities...");e.default=class{constructor(){}guidGenerator(){let t=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}}]);