module.exports=function(e){var r={};function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)t.d(o,n,function(r){return e[r]}.bind(null,n));return o},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(e){this.ENABLED=e.enabled,this.COLORS={white:"rgb(255, 255, 255)",grey:"rgba(255, 255, 255, 0.6)",light:"rgba(255, 255, 255, 0.2)",red:"rgb(255, 65, 65)",green:"rgb(105, 212, 29)",yellow:"rgb(217, 169, 0)",blue:"rgb(54, 211, 221)",violet:"rgb(212, 29, 127)",black:"rgb(0,0,0)"}}log(e,r=!1){this.buildLog(e,this.COLORS.white,r)}error(e,r=!1){this.buildLog(e,this.COLORS.red,r)}stateChange(e,r=!1){this.buildLog(e,this.COLORS.blue,r)}success(e,r=!1){this.buildLog(e,this.COLORS.green,r)}warning(e,r=!1){this.buildLog(e,this.COLORS.yellow,r)}note(e,r=!1){this.buildLog(e,this.COLORS.grey,r)}finish(e,r=!1){if(!this.ENABLED)return!1;let t=this.buildLadder(r);t+='<span style="padding: 0 5px; background: '+this.COLORS.green+"; color: "+this.COLORS.black+'">'+e+"</span>",console.log(t)}ignore(e,r=!1){if(!this.ENABLED)return!1;let t=this.buildLadder(r);t+='<span style="padding: 0 5px; background: '+this.COLORS.grey+"; color: "+this.COLORS.black+'">'+e+"</span>",console.log(t)}countLoop(e,r=!1){if(!this.ENABLED)return!1;let t=this.buildLadder(r);t+='<span style="padding: 0 5px; background: '+this.COLORS.white+"; color: "+this.COLORS.black+'">'+e+"</span>",console.log(t)}buildLog(e,r,t){if(!this.ENABLED)return!1;let o="";t?(o+=this.buildLadder(t),o+='<span style="color: '+r+'">'+e+"</span>"):o='<span style="color: '+r+'">'+e+"</span>",console.log(o)}buildLadder(e){if(e){let t='<span style="color: '+this.COLORS.light+'">';for(var r=0;r<e;r++)t+="|&nbsp;&nbsp;&nbsp;";return t+="</span>"}}}},function(e,r,t){e.exports=t(2)},function(e,r,t){"use strict";const o=new(function(e){return e&&e.__esModule?e:{default:e}}(t(3)).default);e.exports.loop=(()=>o.loop())},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=l(t(0)),n=l(t(4)),s=l(t(5));function l(e){return e&&e.__esModule?e:{default:e}}console.log("Initializing Core...");const a=new o.default({enabled:!1});r.default=class{constructor(){this.PARAM_ADAPTIVE_ROLES=!0,this.LOOP=1,console.log("-- -- CORE_LOGGER_ENABLED: "+a.ENABLED),console.log("-- -- PARAM_ADAPTIVE_ROLES:"+this.PARAM_ADAPTIVE_ROLES),this.Tower=new n.default,this.RoleManager=new s.default,a.stateChange("Constructing game..."),a.log("Available Roles",1),this.RoleManager.ROLES.forEach(e=>{let r=e.role;r+=" (Population: "+e.population+") ",r+=" (Genome: ",e.genome.forEach(e=>{r+="["+e+"]"}),r+=") ",r+=" (Capable Of: ",e.capableOf.forEach(e=>{r+="["+e+"]"}),r+=") ",a.note(r,2)}),a.finish("Done",2),a.stateChange("Game Loop...")}loop(){a.countLoop("&#8634; LOOP "+this.LOOP+" START",1),this.clearDeadCreeps(),this.spawnCreeps(),this.Tower.run(),this.runCreeps(),a.countLoop("&#8856; LOOP "+this.LOOP+" ENDS",1),this.LOOP++}clearDeadCreeps(){for(var e in a.log("Clearing dead Creeps...",1),Memory.creeps)Game.creeps[e]||(a.note("Deleting: "+e,2),delete Memory.creeps[e])}spawnCreeps(){a.log("Spawning Creeps...",1),this.RoleManager.ROLES.forEach(e=>{if(_.filter(Game.creeps,r=>r.memory.role==e.role).length<e.population){var r=Game.spawns.CipciaObfita.createCreep(e.genome,void 0,{role:e.role});a.note("Spawned: "+r+" as "+e.role,2)}})}runCreeps(){for(var e in a.log("Running Creeps...",1),a.log("Selecting roles... ",2),this.PARAM_ADAPTIVE_ROLES?a.success("PARAM_ADAPTIVE_ROLES: "+this.PARAM_ADAPTIVE_ROLES+" &#8594; GO",3):a.note("PARAM_ADAPTIVE_ROLES: "+this.PARAM_ADAPTIVE_ROLES+" &#8603; ABORT",2),Game.creeps){var r=Game.creeps[e];this.RoleManager.ROLES.forEach(e=>{r.memory.role==e.role&&(this.PARAM_ADAPTIVE_ROLES?this.RoleManager.selectRole(r):e.run(r))})}a.finish("Done",4)}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(){console.log("-- Loading Tower Structure...")}run(){for(var e in Game.structures)if(e.structureType==STRUCTURE_TOWER){var r=e;this.findClosestDamagedStructure(r)&&r.repair(closestDamagedStructure);var t=r.pos.findClosestByRange(FIND_HOSTILE_CREEPS);t&&r.attack(t)}}findClosestDamagedStructure(e){return e.pos.findClosestByRange(FIND_STRUCTURES,{filter:e=>e.hits<e.hitsMax})}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=a(t(0)),n=a(t(6)),s=a(t(7)),l=a(t(8));function a(e){return e&&e.__esModule?e:{default:e}}const i=new o.default({enabled:!1});r.default=class{constructor(){this.Harvester=new n.default,this.Builder=new l.default,this.Upgrader=new s.default,this.ROLES=[{role:"harvester",population:3,genome:[WORK,CARRY,MOVE],capableOf:["upgrader","builder"],run:e=>this.Harvester.run(e),needsHelp:e=>this.Harvester.needsHelp(e)},{role:"upgrader",population:2,genome:[WORK,CARRY,MOVE],capableOf:["harvester","builder"],run:e=>this.Upgrader.run(e),needsHelp:e=>this.Upgrader.needsHelp(e)},{role:"builder",population:1,genome:[WORK,CARRY,MOVE],capableOf:["harvester","upgrader"],run:e=>this.Builder.run(e),needsHelp:e=>this.Builder.needsHelp(e)}],console.log("-- Loading RoleManager..."),console.log("-- -- ROLE_MANAGER_LOGGER_ENABLED: "+i.ENABLED)}selectRole(e){const r=this.getCreepRoleReference(e);if(r[0].needsHelp(e)||"upgrader"==r[0].role)r[0].run(e),i.note(e.name+" ("+e.memory.role+") not changed",4);else{const t=this.findRoleInNeed(e,r);t?(t.run(e),i.note(e.name+" ("+e.memory.role+") role was changed to: "+t.role,4)):(r[0].run(e),i.note(e.name+" ("+e.memory.role+") not changed",4))}}findRoleInNeed(e,r){let t=!1;return r[0].capableOf.forEach(r=>{const o=this.ROLES.filter(t=>t.role===r&&t.needsHelp(e));t||void 0===o[0]||(t=o[0])}),t}getCreepRoleReference(e){return this.ROLES.filter(r=>r.role===e.memory.role)}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(){console.log("-- Loading Harvester Role...")}run(e){if(e.carry.energy<e.carryCapacity){const r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0])}else{const r=this.findTargets(e);r.length>0?e.transfer(r[0],RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#0eb05d"}}):e.moveTo(Game.flags.HarvestersGather,{visualizePathStyle:{stroke:"#ffffff"}})}}findTargets(e){return e.room.find(FIND_STRUCTURES,{filter:e=>(e.structureType==STRUCTURE_EXTENSION||e.structureType==STRUCTURE_SPAWN||e.structureType==STRUCTURE_TOWER)&&e.energy<e.energyCapacity})}needsHelp(e){return this.findTargets(e).length>0}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(){console.log("-- Loading Upgrader Role...")}run(e){if(e.memory.upgrading&&0==e.carry.energy&&(e.memory.upgrading=!1,e.say("harvesting")),e.memory.upgrading||e.carry.energy!=e.carryCapacity||(e.memory.upgrading=!0,e.say("upgrading")),e.memory.upgrading)e.upgradeController(e.room.controller)==ERR_NOT_IN_RANGE&&e.moveTo(e.room.controller);else{var r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#0e9db0"}})}}needsHelp(e){return e.carry.energy==e.carryCapacity}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default=class{constructor(){console.log("-- Loading Builder Role...")}run(e){if(e.memory.building&&0==e.carry.energy&&(e.memory.building=!1,e.say("harvesting")),e.memory.building||e.carry.energy!=e.carryCapacity||(e.memory.building=!0,e.say("building")),e.memory.building){var r=e.room.find(FIND_CONSTRUCTION_SITES);r.length?e.build(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#ffffff"}}):e.moveTo(Game.flags.BuildersGatherPoint,{visualizePathStyle:{stroke:"#ffffff"}})}else{var t=e.room.find(FIND_SOURCES);e.harvest(t[0])==ERR_NOT_IN_RANGE&&e.moveTo(t[0],{visualizePathStyle:{stroke:"#ffaa00"}})}}needsHelp(e){return e.room.find(FIND_CONSTRUCTION_SITES).length}}}]);